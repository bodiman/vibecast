var W=Object.defineProperty;var Z=(t,s,i)=>s in t?W(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i;var U=(t,s,i)=>Z(t,typeof s!="symbol"?s+"":s,i);import{j as e,C as X,O as Y,S as _,u as K,a as J,P as Q,V as I,T as ee,H as se,R as te}from"./three-vendor-C6VzmFzk.js";import{r as n,R as V}from"./react-vendor-BlyXjaDO.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))u(a);new MutationObserver(a=>{for(const d of a)if(d.type==="childList")for(const m of d.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&u(m)}).observe(document,{childList:!0,subtree:!0});function i(a){const d={};return a.integrity&&(d.integrity=a.integrity),a.referrerPolicy&&(d.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?d.credentials="include":a.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function u(a){if(a.ep)return;a.ep=!0;const d=i(a);fetch(a.href,d)}})();function re({node:t,position:s,onClick:i,isSelected:u,onPositionChange:a}){var v;const d=n.useRef(null),[m,l]=n.useState(!1),[g,b]=n.useState(!1),{camera:M,raycaster:w,mouse:P}=J(),R=n.useMemo(()=>{switch(t.type){case"scalar":return"#4f46e5";case"series":return"#059669";case"parameter":return"#dc2626";default:return"#6b7280"}},[t.type]),L=n.useMemo(()=>{var f;return .8+((f=t.values)!=null&&f.length?Math.log(t.values.length+1)*.2:0)},[t.values]);K(()=>{if(d.current&&g){const x=d.current.position;a([x.x,x.y,x.z])}});const r=n.useCallback(x=>{x.stopPropagation(),b(!0),i()},[i]),h=n.useCallback(()=>{b(!1)},[]),p=n.useCallback(x=>{if(g&&d.current){const k=d.current;w.setFromCamera(P,M);const f=new Q(new I(0,0,1),0),j=new I;w.ray.intersectPlane(f,j),k.position.copy(j)}},[g,M,w,P]);return e.jsxs("group",{position:s,children:[e.jsxs("mesh",{ref:d,onClick:i,onPointerDown:r,onPointerUp:h,onPointerMove:p,onPointerEnter:()=>l(!0),onPointerLeave:()=>l(!1),scale:m||u?[1.2,1.2,1.2]:[1,1,1],children:[e.jsx("sphereGeometry",{args:[L,32,32]}),e.jsx("meshStandardMaterial",{color:R,transparent:!0,opacity:m||u?.9:.7,emissive:u?R:"#000000",emissiveIntensity:u?.2:0})]}),e.jsx(ee,{position:[0,L+.5,0],fontSize:.3,color:"white",anchorX:"center",anchorY:"middle",maxWidth:2,children:t.name}),m&&e.jsx(se,{distanceFactor:10,children:e.jsxs("div",{className:"bg-black bg-opacity-80 text-white p-2 rounded max-w-xs",children:[e.jsx("div",{className:"font-bold",children:t.name}),e.jsxs("div",{className:"text-sm",children:["Type: ",t.type]}),t.values&&e.jsxs("div",{className:"text-sm",children:["Values: ",t.values.length," points"]}),((v=t.metadata)==null?void 0:v.description)&&e.jsx("div",{className:"text-sm mt-1",children:t.metadata.description})]})})]})}function ae({edge:t,sourcePosition:s,targetPosition:i,onClick:u}){const a=n.useRef(null),[d,m]=n.useState(!1),l=n.useMemo(()=>[new I(...s),new I(...i)],[s,i]),g=n.useMemo(()=>{switch(t.type){case"formula":return"#f59e0b";case"temporal":return"#8b5cf6";case"causal":return"#ef4444";case"derived":return"#10b981";default:return"#6b7280"}},[t.type]);return e.jsxs("group",{children:[e.jsxs("line",{onClick:u,onPointerEnter:()=>m(!0),onPointerLeave:()=>m(!1),children:[e.jsx("bufferGeometry",{ref:a,children:e.jsx("bufferAttribute",{attach:"attributes-position",count:l.length,array:new Float32Array(l.flatMap(b=>[b.x,b.y,b.z])),itemSize:3,args:[new Float32Array(l.flatMap(b=>[b.x,b.y,b.z])),3]})}),e.jsx("lineBasicMaterial",{color:g,linewidth:d?3:1,transparent:!0,opacity:d?1:.6})]}),e.jsxs("mesh",{position:i,children:[e.jsx("coneGeometry",{args:[.1,.3,8]}),e.jsx("meshBasicMaterial",{color:g})]})]})}function ne({data:t,onNodeClick:s,onEdgeClick:i,onLayoutChange:u,layoutAlgorithm:a="force"}){const[d,m]=n.useState(null),[l,g]=n.useState({}),[b,M]=n.useState(!0),w=n.useRef(0);n.useEffect(()=>{const r={};t.nodes.forEach((h,p)=>{if(h.position3D&&a==="force")r[h.id]=[h.position3D.x,h.position3D.y,h.position3D.z];else switch(a){case"circular":const v=p/t.nodes.length*Math.PI*2,x=Math.max(t.nodes.length*.5,5);r[h.id]=[Math.cos(v)*x,Math.sin(v)*x,0];break;case"hierarchical":const k=t.edges.filter(D=>D.target===h.id).length,f=Math.min(k,5),j=t.nodes.filter((D,S)=>{const E=t.edges.filter(y=>y.target===t.nodes[S].id).length;return Math.min(E,5)===f}).length,N=t.nodes.filter((D,S)=>{const E=t.edges.filter(y=>y.target===t.nodes[S].id).length;return Math.min(E,5)===f&&S<=p}).length;r[h.id]=[(N-j/2)*3,f*4-10,(Math.random()-.5)*2];break;case"force":default:const C=Math.sqrt(t.nodes.length)*2;r[h.id]=[(Math.random()-.5)*C,(Math.random()-.5)*C,(Math.random()-.5)*4];break}}),g(r),M(a==="force"),w.current=0},[t,a]),K(()=>{if(t.nodes.length===0||!b||(w.current++,w.current%3!==0))return;const r={...l},h=.048,p=5,v=.1,x=.95;t.nodes.forEach(f=>{if(!r[f.id])return;let[j,N,C]=r[f.id],D=0,S=0,E=0;t.nodes.forEach(o=>{if(f.id===o.id||!r[o.id])return;const[c,z,O]=r[o.id],T=j-c,F=N-z,$=C-O,G=Math.sqrt(T*T+F*F+$*$);if(G>0){const B=p/(G*G);D+=T/G*B,S+=F/G*B,E+=$/G*B}}),t.edges.forEach(o=>{if(o.source===f.id&&r[o.target]){const[c,z,O]=r[o.target],T=c-j,F=z-N,$=O-C;Math.sqrt(T*T+F*F+$*$)>0&&(D+=T*v,S+=F*v,E+=$*v)}});const y=j+D*h*x,A=N+S*h*x,q=C+E*h*x;r[f.id]=[y,A,q]});let k=0;t.nodes.forEach(f=>{if(l[f.id]&&r[f.id]){const j=l[f.id],N=r[f.id],C=Math.sqrt(Math.pow(N[0]-j[0],2)+Math.pow(N[1]-j[1],2)+Math.pow(N[2]-j[2],2));k+=C}}),k<.01&&w.current>300&&M(!1),g(r)});const P=n.useCallback(r=>{m(r.id),s==null||s(r)},[s]),R=n.useCallback(r=>{i==null||i(r)},[i]),L=n.useCallback((r,h)=>{if(g(p=>({...p,[r]:h})),u){const p={};Object.entries({...l,[r]:h}).forEach(([v,x])=>{p[v]={x:x[0],y:x[1],z:x[2]}}),u(p)}},[l,u]);return e.jsxs(e.Fragment,{children:[e.jsx("ambientLight",{intensity:.6}),e.jsx("pointLight",{position:[10,10,10],intensity:.8}),e.jsx("pointLight",{position:[-10,-10,-10],intensity:.4}),t.nodes.map(r=>{const h=l[r.id]||[0,0,0];return e.jsx(re,{node:r,position:h,onClick:()=>P(r),isSelected:d===r.id,onPositionChange:p=>L(r.id,p)},r.id)}),t.edges.map(r=>{const h=l[r.source],p=l[r.target];return!h||!p?null:e.jsx(ae,{edge:r,sourcePosition:h,targetPosition:p,onClick:()=>R(r)},r.id)}),e.jsx("gridHelper",{args:[20,20,"#333333","#333333"]})]})}function ie({data:t,onNodeClick:s,onEdgeClick:i,onLayoutChange:u,layoutAlgorithm:a="force",width:d=800,height:m=600}){return console.log("GraphViewer3D render:",{nodeCount:t.nodes.length,edgeCount:t.edges.length}),!t||t.nodes.length===0?e.jsx("div",{style:{width:d,height:m,position:"relative"},className:"bg-gray-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx("div",{className:"animate-spin inline-block w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full mb-4"}),e.jsx("div",{className:"text-lg font-semibold",children:"Loading Graph..."}),e.jsx("div",{className:"text-sm text-gray-400 mt-2",children:"Preparing 3D visualization"})]})}):e.jsxs("div",{style:{width:d,height:m,position:"relative"},children:[e.jsxs(X,{camera:{position:[10,10,10],fov:60,near:.1,far:1e3},style:{background:"#0f0f0f"},gl:{antialias:!0,alpha:!1},dpr:window.devicePixelRatio,children:[e.jsx(ne,{data:t,onNodeClick:s,onEdgeClick:i,onLayoutChange:u,layoutAlgorithm:a}),e.jsx(Y,{enablePan:!0,enableZoom:!0,enableRotate:!0,minDistance:5,maxDistance:100}),e.jsx(_,{})]}),e.jsx("div",{className:"absolute bottom-4 left-4 bg-gray-900 bg-opacity-90 backdrop-blur text-white p-3 rounded-lg border border-gray-700",children:e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsx("div",{className:"text-gray-300",children:"ðŸ–±ï¸ Drag to rotate â€¢ ðŸ” Scroll to zoom"}),e.jsx("div",{className:"text-gray-300",children:"ðŸ“± Right-click to pan â€¢ ðŸ‘† Click to select"})]})})]})}class le{constructor(s){U(this,"baseUrl");U(this,"timeout");U(this,"maxRetries",3);U(this,"retryDelay",1e3);this.baseUrl=s.baseUrl.replace(/\/$/,""),this.timeout=s.timeout||1e4}async request(s,i={},u=0){const a=`${this.baseUrl}${s}`,d=new AbortController,m=setTimeout(()=>d.abort(),this.timeout);try{const l=await fetch(a,{...i,signal:d.signal,headers:{"Content-Type":"application/json",...i.headers}});if(clearTimeout(m),!l.ok){const b=await l.text(),M=new Error(`HTTP ${l.status}: ${b}`);if(u<this.maxRetries&&this.shouldRetry(l.status))return console.warn(`Request failed, retrying in ${this.retryDelay}ms... (${u+1}/${this.maxRetries})`),await this.delay(this.retryDelay*(u+1)),this.request(s,i,u+1);throw M}const g=l.headers.get("content-type");return g&&g.includes("application/json")?await l.json():await l.text()}catch(l){if(clearTimeout(m),l instanceof Error){if(l.name==="AbortError")throw new Error(`Request timeout after ${this.timeout}ms`);if(u<this.maxRetries&&this.isNetworkError(l))return console.warn(`Network error, retrying in ${this.retryDelay}ms... (${u+1}/${this.maxRetries})`),await this.delay(this.retryDelay*(u+1)),this.request(s,i,u+1);throw l}throw new Error("Unknown error occurred")}}shouldRetry(s){return s>=500||s===408||s===429}isNetworkError(s){return s.message.includes("fetch")||s.message.includes("network")||s.message.includes("timeout")}delay(s){return new Promise(i=>setTimeout(i,s))}async healthCheck(){return this.request("/health")}async getModels(){return(await this.request("/api/models")).models}async getModelInfo(s){return this.request(`/api/models/${encodeURIComponent(s)}/info`)}async getGraphData(s){return this.request(`/api/models/${encodeURIComponent(s)}/graph`)}async saveLayout(s,i){await this.request(`/api/models/${encodeURIComponent(s)}/layout`,{method:"POST",body:JSON.stringify(i)})}async testConnection(){try{return await this.healthCheck(),!0}catch{return!1}}}const oe=()=>"https://vibecast.fly.dev",H=new le({baseUrl:oe(),timeout:15e3});function ce(){var A,q;const[t,s]=n.useState({nodes:[],edges:[]}),[i,u]=n.useState([]),[a,d]=n.useState(""),[m,l]=n.useState(null),[g,b]=n.useState(null),[M,w]=n.useState(!1),[P,R]=n.useState(!0),[L,r]=n.useState(null),[h,p]=n.useState("testing"),[v,x]=n.useState("force"),[k,f]=n.useState(!1),[j,N]=n.useState(!1);n.useEffect(()=>{(async()=>{R(!0),p("testing");try{if(!await H.testConnection()){p("disconnected"),r("Cannot connect to server. Using sample data."),R(!1);return}p("connected");const z=await H.getModels();u(z),z.length>0&&d(z[0]),r(null)}catch(c){console.error("Failed to initialize app:",c),p("disconnected"),r(`Connection failed: ${c instanceof Error?c.message:String(c)}`)}finally{R(!1)}})()},[]),n.useEffect(()=>{const o=c=>{if(c.ctrlKey||c.metaKey)switch(c.key){case"1":c.preventDefault(),x("force");break;case"2":c.preventDefault(),x("circular");break;case"3":c.preventDefault(),x("hierarchical");break;case"?":c.preventDefault(),N(!j);break}else c.key==="Escape"&&(l(null),b(null),N(!1))};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[j]),n.useEffect(()=>{if(!a)return;(async()=>{w(!0),r(null);try{const c=await H.getGraphData(a);s(c)}catch(c){console.error("Failed to fetch graph data:",c),r(`Failed to fetch graph data: ${c instanceof Error?c.message:String(c)}`),s({nodes:[],edges:[]})}finally{w(!1)}})()},[a]);const C=n.useCallback(o=>{l(o),b(null)},[]),D=n.useCallback(o=>{b(o),l(null)},[]),S=n.useCallback(async o=>{if(a)try{await H.saveLayout(a,{nodePositions:o})}catch(c){console.error("Failed to save layout:",c)}},[a]),E={nodes:[{id:"revenue",name:"Revenue",type:"series",values:[100,110,120,130]},{id:"costs",name:"Costs",type:"series",values:[80,85,90,95]},{id:"profit",name:"Profit",type:"scalar",values:[20,25,30,35]},{id:"margin",name:"Margin",type:"parameter",values:[.2]},{id:"growth",name:"Growth Rate",type:"parameter",values:[.1]}],edges:[{id:"rev-profit",source:"revenue",target:"profit",type:"formula",formula:"revenue - costs"},{id:"costs-profit",source:"costs",target:"profit",type:"formula",formula:"revenue - costs"},{id:"margin-profit",source:"margin",target:"profit",type:"derived"},{id:"growth-revenue",source:"growth",target:"revenue",type:"temporal"}]},y=t.nodes.length>0&&h==="connected"?t:E;return console.log("GraphExplorer render:",{connectionStatus:h,graphDataNodes:t.nodes.length,displayDataNodes:y.nodes.length,selectedModel:a}),e.jsxs("div",{className:"h-screen flex bg-gray-900",children:[e.jsxs("div",{className:"w-80 bg-gray-800 text-white flex flex-col border-r border-gray-700",children:[e.jsxs("div",{className:"p-4 border-b border-gray-700",children:[e.jsx("h1",{className:"text-xl font-bold text-blue-400",children:"Context Marketplace"}),e.jsx("h2",{className:"text-sm text-gray-300 mt-1",children:"3D Graph Explorer"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-6",children:[e.jsx("div",{className:"bg-gray-700 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${h==="connected"?"bg-green-500":h==="disconnected"?"bg-red-500":"bg-yellow-500 animate-pulse"}`}),e.jsx("span",{className:"text-sm font-medium",children:h==="connected"?"Connected to server":h==="disconnected"?"Using sample data":"Connecting..."})]})}),e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-semibold mb-3 text-gray-200",children:"Select Model"}),e.jsxs("select",{value:a,onChange:o=>d(o.target.value),className:"w-full p-3 bg-gray-600 border border-gray-500 rounded-lg text-white disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:P||h==="testing",children:[e.jsx("option",{value:"",children:P?"Loading models...":"Choose a model..."}),i.map(o=>e.jsx("option",{value:o,children:o},o))]}),P&&e.jsxs("div",{className:"mt-3 text-sm text-gray-300 flex items-center",children:[e.jsx("div",{className:"animate-spin inline-block w-4 h-4 border-2 border-blue-500 border-t-transparent rounded-full mr-2"}),"Loading models..."]})]}),L&&e.jsx("div",{className:"bg-red-900 border border-red-700 rounded-lg p-3",children:e.jsx("div",{className:"text-red-200 text-sm",children:L})}),M&&e.jsx("div",{className:"bg-blue-900 border border-blue-700 rounded-lg p-3",children:e.jsxs("div",{className:"text-blue-200 text-sm flex items-center",children:[e.jsx("div",{className:"animate-spin inline-block w-4 h-4 border-2 border-blue-400 border-t-transparent rounded-full mr-2"}),"Loading graph data..."]})}),e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold mb-3 text-gray-200",children:"Quick Actions"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>l(null),className:"flex-1 px-3 py-2 bg-gray-600 hover:bg-gray-500 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!m,children:"Clear Selection"}),e.jsx("button",{onClick:()=>N(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-lg text-sm font-medium transition-colors",children:"Help"})]})]}),e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold mb-3 text-gray-200",children:"Layout Algorithm"}),e.jsxs("select",{value:v,onChange:o=>x(o.target.value),className:"w-full p-3 bg-gray-600 border border-gray-500 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"force",children:"Force-Directed"}),e.jsx("option",{value:"circular",children:"Circular"}),e.jsx("option",{value:"hierarchical",children:"Hierarchical"})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-400 bg-gray-800 rounded px-2 py-1",children:"Keyboard: Ctrl+1/2/3"})]}),e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-200",children:"Graph Statistics"}),e.jsxs("button",{onClick:()=>f(!k),className:"text-xs px-2 py-1 bg-gray-600 rounded hover:bg-gray-500 transition-colors",children:[k?"Hide":"Show"," Details"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"bg-gray-800 rounded p-2",children:[e.jsx("div",{className:"text-gray-400 text-xs",children:"Nodes"}),e.jsx("div",{className:"text-white font-medium",children:y.nodes.length})]}),e.jsxs("div",{className:"bg-gray-800 rounded p-2",children:[e.jsx("div",{className:"text-gray-400 text-xs",children:"Edges"}),e.jsx("div",{className:"text-white font-medium",children:y.edges.length})]})]}),k&&e.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-600 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[e.jsxs("div",{className:"bg-gray-800 rounded p-2",children:[e.jsx("div",{className:"text-gray-400",children:"Avg. Connections"}),e.jsx("div",{className:"text-white",children:y.nodes.length>0?(y.edges.length*2/y.nodes.length).toFixed(1):0})]}),e.jsxs("div",{className:"bg-gray-800 rounded p-2",children:[e.jsx("div",{className:"text-gray-400",children:"Density"}),e.jsxs("div",{className:"text-white",children:[y.nodes.length>1?(y.edges.length/(y.nodes.length*(y.nodes.length-1)/2)*100).toFixed(1):0,"%"]})]})]}),e.jsxs("div",{className:"bg-gray-800 rounded p-3",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Node Types"}),e.jsx("div",{className:"space-y-1",children:Object.entries(y.nodes.reduce((o,c)=>(o[c.type]=(o[c.type]||0)+1,o),{})).map(([o,c])=>e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-300 capitalize",children:o}),e.jsx("span",{className:"text-white",children:c})]},o))})]})]})]})]}),m&&e.jsxs("div",{className:"bg-blue-900 border border-blue-700 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold mb-3 text-blue-200",children:"Selected Node"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"font-medium text-white",children:m.name}),e.jsx("div",{className:"text-sm text-blue-300 bg-blue-800 rounded px-2 py-1 inline-block",children:m.type}),m.values&&e.jsxs("div",{className:"text-sm text-blue-200",children:[e.jsx("span",{className:"text-blue-300",children:"Values:"})," [",m.values.slice(0,3).join(", "),m.values.length>3?"...":"","]"]}),((A=m.metadata)==null?void 0:A.description)&&e.jsx("div",{className:"text-sm text-blue-200 bg-blue-800 rounded p-2 mt-2",children:m.metadata.description})]})]}),g&&e.jsxs("div",{className:"bg-green-900 border border-green-700 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold mb-3 text-green-200",children:"Selected Edge"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"font-medium text-white",children:[g.source," â†’ ",g.target]}),e.jsx("div",{className:"text-sm text-green-300 bg-green-800 rounded px-2 py-1 inline-block",children:g.type}),g.formula&&e.jsxs("div",{className:"text-sm text-green-200",children:[e.jsx("span",{className:"text-green-300",children:"Formula:"})," ",g.formula]}),((q=g.metadata)==null?void 0:q.description)&&e.jsx("div",{className:"text-sm text-green-200 bg-green-800 rounded p-2 mt-2",children:g.metadata.description})]})]}),e.jsxs("div",{className:"bg-gray-700 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold mb-3 text-gray-200",children:"Legend"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Node Types"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full mr-2"}),e.jsx("span",{className:"text-gray-300",children:"Scalar"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),e.jsx("span",{className:"text-gray-300",children:"Series"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-2"}),e.jsx("span",{className:"text-gray-300",children:"Parameter"})]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Edge Types"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-1 bg-yellow-500 mr-2 rounded"}),e.jsx("span",{className:"text-gray-300",children:"Formula"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-1 bg-purple-500 mr-2 rounded"}),e.jsx("span",{className:"text-gray-300",children:"Temporal"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-1 bg-red-500 mr-2 rounded"}),e.jsx("span",{className:"text-gray-300",children:"Causal"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-1 bg-green-500 mr-2 rounded"}),e.jsx("span",{className:"text-gray-300",children:"Derived"})]})]})]})]})]})]})," "]})," ",e.jsxs("div",{className:"flex-1 relative bg-black",children:[e.jsx(ie,{data:y,onNodeClick:C,onEdgeClick:D,onLayoutChange:S,layoutAlgorithm:v,width:window.innerWidth-320,height:window.innerHeight}),e.jsxs("div",{className:"absolute top-4 right-4 space-y-3",children:[a&&e.jsxs("div",{className:"bg-gray-900 bg-opacity-95 backdrop-blur text-white p-4 rounded-lg border border-gray-700 shadow-xl",children:[e.jsx("div",{className:"font-semibold text-blue-400",children:"Current Model"}),e.jsx("div",{className:"text-sm text-gray-200",children:a}),e.jsxs("div",{className:"text-xs text-gray-400 mt-2 bg-gray-800 rounded px-2 py-1",children:["Layout: ",v.charAt(0).toUpperCase()+v.slice(1)]})]}),e.jsx("button",{onClick:()=>N(!j),className:"bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-lg shadow-xl transition-colors border border-blue-500",title:"Show keyboard shortcuts (Ctrl+?)",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),j&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-900 text-white p-6 rounded-xl border border-gray-700 shadow-2xl max-w-lg w-full max-h-[80vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-bold text-blue-400",children:"Help & Controls"}),e.jsx("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-white text-2xl transition-colors bg-gray-800 hover:bg-gray-700 rounded-lg w-8 h-8 flex items-center justify-center",children:"Ã—"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3 text-gray-200",children:"Keyboard Shortcuts"}),e.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("kbd",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-mono",children:"Ctrl+1"}),e.jsx("span",{className:"text-gray-300",children:"Force-directed layout"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("kbd",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-mono",children:"Ctrl+2"}),e.jsx("span",{className:"text-gray-300",children:"Circular layout"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("kbd",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-mono",children:"Ctrl+3"}),e.jsx("span",{className:"text-gray-300",children:"Hierarchical layout"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("kbd",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-mono",children:"Ctrl+?"}),e.jsx("span",{className:"text-gray-300",children:"Show/hide help"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("kbd",{className:"px-2 py-1 bg-gray-700 rounded text-xs font-mono",children:"Escape"}),e.jsx("span",{className:"text-gray-300",children:"Clear selection"})]})]})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3 text-gray-200",children:"Mouse Controls"}),e.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:e.jsxs("div",{className:"space-y-2 text-sm text-gray-300",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mr-3"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Left click:"})," Select node/edge"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-3"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Left drag:"})," Rotate 3D view"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full mr-3"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Right drag:"})," Pan view"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mr-3"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Scroll wheel:"})," Zoom in/out"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full mr-3"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Drag nodes:"})," Move in 3D space"]})]})]})})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-700",children:e.jsx("button",{onClick:()=>N(!1),className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg transition-colors",children:"Got it!"})})]})})]})]})}function de(){return e.jsx("div",{className:"App",children:e.jsx(ce,{})})}class he extends V.Component{constructor(s){super(s),this.state={hasError:!1}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,i){console.error("React Error Boundary caught an error:",s,i)}render(){var s;return this.state.hasError?e.jsxs("div",{style:{height:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"#0a0a0a",color:"#fff",padding:"2rem",fontFamily:"monospace"},children:[e.jsx("h1",{children:"Something went wrong"}),e.jsxs("details",{style:{marginTop:"1rem",maxWidth:"80%"},children:[e.jsx("summary",{children:"Error details"}),e.jsx("pre",{style:{marginTop:"1rem",padding:"1rem",background:"#1a1a1a",borderRadius:"4px",overflow:"auto",fontSize:"0.8rem"},children:(s=this.state.error)==null?void 0:s.stack})]}),e.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:"1rem",padding:"0.5rem 1rem",background:"#007acc",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Reload Page"})]}):this.props.children}}const me=te.createRoot(document.getElementById("root"));me.render(e.jsx(V.StrictMode,{children:e.jsx(he,{children:e.jsx(de,{})})}));
//# sourceMappingURL=index-MbMdZnPr.js.map
